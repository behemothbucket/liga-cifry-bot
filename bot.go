package main

import (
	"context"
	"fmt"
	tgbotapi "github.com/go-telegram-bot-api/telegram-bot-api/v5"
	"log"
	"os"
)

type Bot struct {
	bot *tgbotapi.BotAPI
}

func NewBot() *Bot {
	var err error

	bot, err := tgbotapi.NewBotAPI(getToken())
	if err != nil {
		log.Panic(err)
	}

	return &Bot{bot: bot}
}

func getToken() string {
	token, exists := os.LookupEnv("TOKEN")

	if !exists {
		log.Print("–¢–æ–∫–µ–Ω –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω")
	}

	return token
}

func (b *Bot) receiveUpdates(ctx context.Context, updates tgbotapi.UpdatesChannel) {
	for {
		select {
		case <-ctx.Done():
			return
		case update := <-updates:
			b.handleUpdate(update)
		}
	}
}

func (b *Bot) handleUpdate(update tgbotapi.Update) {
	switch {
	case update.Message != nil:
		b.handleMessage(update)
		break
	case update.CallbackQuery != nil:
		b.handleButton(update.CallbackQuery)
		break
	}
}

func (b *Bot) handleMessage(update tgbotapi.Update) {
	if update.Message.From == nil {
		return
	}

	chatID := update.Message.Chat.ID
	user := update.Message.From
	message := update.Message

	logMessage(user, message.Text, chatID)

	var err error

	if b.isValidMessageText(update) {
		switch {
		case update.Message.IsCommand():
			b.handleCommand(update)
		case searchMode:
			err = b.sendAcceptMessage(chatID)
		default:
			err = b.sendMainMenu(chatID)
		}
	} else if len(message.NewChatMembers) != 0 {
		userName := message.NewChatMembers[0].UserName
		firstName := message.NewChatMembers[0].FirstName
		lastName := message.NewChatMembers[0].LastName
		userID := message.NewChatMembers[0].ID
		isBot := message.NewChatMembers[0].IsBot
		AddUser(userID, userName, firstName, lastName, isBot)
	} else if update.Message.LeftChatMember.UserName != "" {
		userID := update.Message.LeftChatMember.ID
		DeleteUser(userID)
	} else {
		err = b.sendMediaErrorMessage(update.Message.Chat.ID)
	}

	if err != nil {
		log.Println("–û—à–∏–±–∫–∞:", err.Error())
	}
}

func (b *Bot) handleCommand(update tgbotapi.Update) {
	command := update.Message.Text
	//chatType := update.Message.Chat.Type
	chatID := update.Message.Chat.ID
	//userID := update.Message.From.ID
	botName := fmt.Sprintf("@%s", b.bot.Self.UserName)

	//if chatType == "group" || chatType == "private" || chatType == "supergroup" || chatType == "channel" {
	//	log.Printf("–û–±–Ω–∞—Ä—É–∂–µ–Ω —á–∞—Ç —Å —Ç–∏–ø–æ–º %s, –±–ª–æ–∫–∏—Ä—É—é –∫–æ–º–º–∞–Ω–¥—É", chatType)
	//	b.SendMessage(chatID, "–í—ã –Ω–µ —è–≤–ª—è–µ—Ç–µ—Å—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—É—é –∫–æ–º–º–∞–Ω–¥—É")
	//	return
	//}

	switch command {
	case "/start", "/start" + botName:
		b.sendMainMenu(chatID)
		break
	case "/checkmember", "/checkmember" + botName:
		member, _ := b.bot.GetChatMember(
			tgbotapi.GetChatMemberConfig{
				ChatConfigWithUser: tgbotapi.ChatConfigWithUser{
					ChatID: -1001992755263,
					UserID: 155401792,
				},
			})
		b.SendMessage(chatID, fmt.Sprintf("–Ø–≤–ª—è–µ—Ç—Å—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–º –≥—Ä—É–ø–ø—ã: %s\n–í—ã—à–µ–ª –∏–∑ –≥—Ä—É–ø–ø—ã: %t\n–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: %s\nchatID: %d", member.Status, member.HasLeft(), member.User.UserName, chatID))
		break
	case "/user", "/user" + botName:
		showSearchResultsMode = true
		card1 := `
üßë‚Äçüíº <b>–§–ò–û</b>
–ê–±–¥—Ä–∞—Ö–º–∞–Ω–æ–≤–∞ –ú–∞—Ä–∏–Ω–∞ –í–∞—Å–∏–ª—å–µ–≤–Ω–∞

üèõ <b>–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</b>
–ê–ù–û –í–û "–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –ò–Ω–Ω–æ–ø–æ–ª–∏—Å"

üíº <b>–î–æ–ª–∂–Ω–æ—Å—Ç—å</b>
–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –º–µ–∂–æ—Ç—Ä–∞—Å–ª–µ–≤–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

üìù <b>–ö–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏</b>
üîπ–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é
üîπ–ó–∞—â–∏—Ç–∞ –∏ –∫–æ–º–º–µ—Ä—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è IT —Ä–µ—à–µ–Ω–∏–π
üîπ–°—Ç—Ä–∞—Ç–µ—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—ã–º–∏ –∞–∫—Ç–∏–≤–∞–º–∏
üîπ–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Ä–µ–µ—Å—Ç—Ä–µ –æ—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ü–û
üîπ–°–æ–∑–¥–∞–Ω–∏–µ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π –≤ –æ–±–ª–∞—Å—Ç–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é –∏ –±–∞–∑ –∑–Ω–∞–Ω–∏–π
üîπ–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
üîπ–ù–æ—Ä–º–∞—Ç–∏–≤–Ω–æ-–º–µ—Ç–æ–¥–∏—á–µ—Å–∫–æ–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ —É–ø—Ä–∞–≤–µ–ª–µ–Ω–∏—è –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å
üîπ–û—Ü–µ–Ω–∫–∞ —É—Ä–æ–≤–Ω—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
üîπ–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ-–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π —Å–ª–æ–∂–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
üîπ–°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º –≤ —Ä–∞–º–∫–∞—Ö —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã—Ö –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π

ü§ù <b>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞</b>
üîπ–æ–±–º–µ–Ω –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—è–º–∏ –≤ –æ–±–ª–∞—Å—Ç–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ, –ø—Ä–∞–≤–æ–≤–æ–≥–æ, —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–≥–æ –∞—É–¥–∏—Ç–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤;
üîπ—Å–æ–≤–º–µ—Å—Ç–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º –≤ –æ–±–ª–∞—Å—Ç–∏ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π;
üîπ–ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ —Å–ø–∏–∫–µ—Ä–æ–≤ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –≤ –æ–±–ª–∞—Å—Ç–∏ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π;
üîπ—Å–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π, –≤ —Ç–æ–º —á–∏—Å–ª–µ –≤—ã—Ö–æ–¥ –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–µ –≥—Ä–∞–Ω—Ç–æ–≤–æ–µ –∏–ª–∏ —á–∞—Å—Ç–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ;
üîπ—É—Å–∏–ª–µ–Ω–∏–µ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π –≤ –æ–±–ª–∞—Å—Ç–∏ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è —á–∞—Å—Ç–Ω–æ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–≤ (–ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è);
üîπ—É—Å–∏–ª–µ–Ω–∏–µ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π –≤ –æ–±–ª–∞—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –ø–æ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –æ—Ä–≥–∞–Ω–∑–∏–∞—Ü–∏–∏;
üîπ–∫–∞–Ω–¥–∏–¥–∞—Ç—ã, —É—Å–∏–ª–µ–Ω–∏–µ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —à—Ç–∞—Ç–∞ –ø–∞—Ç–µ–Ω—Ç–Ω—ã—Ö –ø–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –∏ IP —é—Ä–∏—Å—Ç–æ–≤

üìß <b>–ö–æ–Ω—Ç–∞–∫—Ç—ã</b> m.abdrakhmanova@innopolis.ru`
		card2 := `
üßë‚Äçüíº <b>–§–ò–û</b>
–†–∞—Ö–º–∞—Ç—É–ª–ª–∏–Ω–∞ –ï–ª–µ–Ω–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞
		
üèõ <b>–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</b>
–ê–ù–û –í–û "–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –ò–Ω–Ω–æ–ø–æ–ª–∏—Å"
		
üíº <b>–î–æ–ª–∂–Ω–æ—Å—Ç—å</b>
–î–æ—Ü–µ–Ω—Ç, —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏
		
üìù <b>–ö–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏</b>
–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º: 
üîπ–∞–Ω–∞–ª–∏–∑ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ-—Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–π
üîπ—Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
üîπ—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–æ–º
üîπ–±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞
üîπ—Ä–µ–¥–∞–∫—Ç–æ—Ä—Å–∫–æ-–∏–∑–¥–∞—Ç–µ–ª—å—Å–∫–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞—É—á–Ω—ã—Ö –∂—É—Ä–Ω–∞–ª–æ–≤
		
ü§ù <b>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞</b>
üîπ–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ª–µ–∫—Ü–∏–π, –≤–µ–±–∏–Ω–∞—Ä–æ–≤ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞ –∏ —Å–ø–∏–∫–µ—Ä–∞
üîπ–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ —Ä–∞–±–æ—Ç—ã –∏ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –ò–°–£ –†–ò–î (–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
üîπ–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.
		
üì± <b>–ö–æ–Ω—Ç–∞–∫—Ç—ã</b> @woman_21`
		b.sendMarkupMessage(chatID, card1)
		showSearchResultsMode = true
		b.sendMarkupMessage(chatID, card2)
	case "/university", "/university@" + botName:
		showSearchResultsMode = true
		text := `
üèõ <b>–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</b>
–ê–ù–û –í–û "–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –ò–Ω–Ω–æ–ø–æ–ª–∏—Å"

üè¢ <b>–°—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ</b>
–ú–µ–∂–æ—Ç—Ä–∞—Å–ª–µ–≤–æ–π —Ü–µ–Ω—Ç—Ä —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

üìç <b>–ì–æ—Ä–æ–¥</b>
–≥. –ò–Ω–Ω–æ–ø–æ–ª–∏—Å

ü§ù <b>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞</b>
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –≤—Å–µ–º —Ü–∏–∫–ª–µ –æ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏—è –†–ò–î –¥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∫–æ–º–º–µ—Ä—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

üöÄ <b>¬´–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç-2030¬ª</b>
–ù–µ—Ç

üåê <b>–ß–ª–µ–Ω—Å—Ç–≤–æ –≤ –∫–æ–Ω—Å–æ—Ä—Ü–∏—É–º–µ</b>
–î–∞

‚öõÔ∏è <b>–†–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–≤–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ü–û</b>
–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ò–°–£ –†–ò–î (–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∞, —É—á–µ—Ç–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π). –ó–∞–ø–∏—Å—å –≤ —Ä–µ–µ—Å—Ç—Ä–µ –æ—Ç 01.03.2023 ‚Ññ16846)

üî¨ <b>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –ø–ª–æ—â–∞–¥–∫–∏ –∏ –ù–û–¶</b>
–ù–µ—Ç`
		b.SendMessage(chatID, text)

		textSkills := `üìù <b>–ö–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏</b>
üîπ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –∑–∞—è–≤–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏–µ –∏ –≤–µ–¥–µ–Ω–∏–µ –¥–µ–ª–æ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–ª–µ–∑–Ω—É—é –º–æ–¥–µ–ª—å –∏ –≤–µ–¥–µ–Ω–∏–µ –¥–µ–ª–æ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –∑–∞—è–≤–∫–∏ –Ω–∞ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑–µ—Ü –∏ –≤–µ–¥–µ–Ω–∏–µ –¥–µ–ª–æ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –∑–∞—è–≤–∫–∏ –Ω–∞ —Ç–æ–≤–∞—Ä–Ω—ã–π –∑–Ω–∞–∫ –∏ –≤–µ–¥–µ–Ω–∏–µ –¥–µ–ª–æ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –∑–∞—è–≤–∫–∏ –Ω–∞ —Ç–æ–≤–∞—Ä–Ω—ã–π –∑–Ω–∞–∫ –∏ –≤–µ–¥–µ–Ω–∏–µ –¥–µ–ª–æ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ ¬´–ø–æ–¥ –∫–ª—é—á¬ª (–ø–æ–¥–∞—á–∞ –∑–∞—è–≤–∫–∏ –∏ –¥–µ–ª–æ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ, –ø—Ä–æ–≤–µ—Ä–∫–∞ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π —á–∏—Å—Ç–æ—Ç—ã —Ç–æ–≤–∞—Ä–Ω–æ–≥–æ –∑–Ω–∞–∫–∞ ‚Äì –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –ø–µ—Ä–µ–¥–∞—á–∏ –ø—Ä–∞–≤ —Å –∞–≤—Ç–æ—Ä–∞–º–∏ –ª–æ–≥–æ—Ç–∏–ø–∞, –∑–∞–ø—Ä–æ—Å—ã –ø–∏—Å–µ–º-—Å–æ–≥–ª–∞—Å–∏–π)
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –≠–í–ú
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
üîπ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø–æ–¥–∞—á–µ –∫–æ–º–ø–ª–µ–∫—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è –≤–Ω–µ—Å–µ–Ω–∏—è IT-—Ä–µ—à–µ–Ω–∏—è –≤ –ï–¥–∏–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω –∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –ü–∞—Ç–µ–Ω—Ç–Ω—ã–µ –∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
üîπ –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ø–∞—Ç–µ–Ω—Ç–Ω–æ-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–Ω–∞–ª–æ–≥–æ–≤ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –æ–¥–Ω–æ–≥–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
üîπ –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ø–∞—Ç–µ–Ω—Ç–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –ø–æ –ì–û–°–¢ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è —Ç–µ—Ö–Ω–∏–∫–∏
üîπ –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ø–∞—Ç–µ–Ω—Ç–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –ø–æ –ì–û–°–¢ –Ω–∞ –ø–∞—Ç–µ–Ω—Ç–Ω—É—é —á–∏—Å—Ç–æ—Ç—É
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø–∞—Ç–µ–Ω—Ç–Ω–æ–≥–æ –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞
üîπ –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –º–µ—Ç–æ–¥–∏–∫–∏ –∏—Å–ø—ã—Ç–∞–Ω–∏–π –ø–æ –ì–û–°–¢
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ø–æ –ì–û–°–¢
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞/—Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ –ø–æ –ì–û–°–¢
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –∑–∞—è–≤–∫–∏
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ –ø–æ–¥–∞—á–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π –∑–∞—è–≤–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏–µ
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ –ø–æ–¥–∞—á–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π –∑–∞—è–≤–∫–∏ –Ω–∞ —Ç–æ–≤–∞—Ä–Ω—ã–π –∑–Ω–∞–∫
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –µ–≤—Ä–∞–∑–∏–π—Å–∫–æ–π –∑–∞—è–≤–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏–µ –∏ –≤–µ–¥–µ–Ω–∏–µ –¥–µ–ª–æ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è –µ–≤—Ä–∞–∑–∏–π—Å–∫–æ–π –∑–∞—è–≤–∫–∏ –Ω–∞ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑–µ—Ü –∏ –≤–µ–¥–µ–Ω–∏–µ –¥–µ–ª–æ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π –∑–∞—è–≤–∫–∏ –Ω–∞ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑–µ—Ü –∏ –≤–µ–¥–µ–Ω–∏–µ –¥–µ–ª–æ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ –ø–æ–¥–∞—á–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–π –∑–∞—è–≤–∫–∏ –Ω–∞ —Ç–æ–≤–∞—Ä–Ω—ã–π –∑–Ω–∞–∫ –ê—É–¥–∏—Ç –∏ –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥
üîπ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ—Ç—á–µ—Ç–∞ –æ–± –æ—Ü–µ–Ω–∫–µ —É—Ä–æ–≤–Ω—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –ø–æ –ì–û–°–¢
üîπ –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –æ—Ö—Ä–∞–Ω—ã, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –∫–æ–º–º–µ—Ä—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –†–ò–î, —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –ê—É–¥–∏—Ç —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é
üîπ–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∞—É–¥–∏—Ç –û–±—É—á–µ–Ω–∏–µ –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –æ—Ö—Ä–∞–Ω—ã, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –∫–æ–º–º–µ—Ä—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –†–ò–î, —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
`
		b.sendMarkupMessage(chatID, textSkills)
	}
}

func (b *Bot) handleButton(query *tgbotapi.CallbackQuery) {
	var text string

	markup := mainMenuMarkup
	message := query.Message

	if query.Data == searchUserButton {
		text = searchMenuDescription
		markup = getUserSearchMenuMarkup()
		currentSearchScreen = "user"
	} else if query.Data == searchUniversityButton {
		text = searchMenuDescription
		markup = getUniversitySearchMenuMarkup()
		currentSearchScreen = "university"
	} else if query.Data == backButton || query.Data == backToMainMenuButton {
		text = mainMenuDescription
		markup = mainMenuMarkup
		for k := range searchCriterias {
			delete(searchCriterias, k)
		}
	} else if query.Data == applyButton {
		if len(searchCriterias) == 0 {
			text = "Ô∏è‚ùóÔ∏è–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è-–±—ã –æ–¥–∏–Ω –∫—Ä–∏—Ç–µ—Ä–∏–π –ø–æ–∏—Å–∫–∞"
			markup = getUserSearchMenuMarkup()
		} else {
			text = getCriteria()
			searchMode = true
			cancelMenuMarkup = getCancelMenuMarkup()
			markup = cancelMenuMarkup
		}
	} else if query.Data == cancelButton {
		removeAllSearchCriterias()
		resetCriteriaButtons()
		searchMode = false
		callbackCfg := tgbotapi.NewCallback(query.ID, "")
		b.bot.Send(callbackCfg)
		b.sendMainMenu(message.Chat.ID)
		return
	} else if criteriaButtonIsClicked(query.Data) {
		toggleCriteriaButton(query.Data)
		text = searchMenuDescription
		if currentSearchScreen == "user" {
			markup = getUserSearchMenuMarkup()
		} else {
			markup = getUniversitySearchMenuMarkup()
		}
	}

	callbackCfg := tgbotapi.NewCallback(query.ID, "")
	b.bot.Send(callbackCfg)

	msg := tgbotapi.NewEditMessageTextAndMarkup(message.Chat.ID, message.MessageID, text, markup)
	msg.ParseMode = tgbotapi.ModeHTML
	b.bot.Send(msg)
}
